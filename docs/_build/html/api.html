<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>API &mdash; A-Profiles  documentation</title><link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Installation" href="installation.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> A-Profiles
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#reading-classes">Reading Classes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-aprofiles.reader">ReadProfiles</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#data-classes">Data Classes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-aprofiles.profilesdata">ProfilesData</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-aprofiles.rayleigh">Rayleigh</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-aprofiles.plot.image">Plotting</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">A-Profiles</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>API</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/api.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="api">
<h1>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h1>
<p>Documentation of the core API of aprofiles.</p>
<div class="section" id="reading-classes">
<h2>Reading Classes<a class="headerlink" href="#reading-classes" title="Permalink to this headline">¶</a></h2>
<div class="section" id="module-aprofiles.reader">
<span id="readprofiles"></span><h3>ReadProfiles<a class="headerlink" href="#module-aprofiles.reader" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt id="aprofiles.reader.ReadProfiles">
<em class="property">class </em><code class="sig-prename descclassname">aprofiles.reader.</code><code class="sig-name descname">ReadProfiles</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aprofiles/reader.html#ReadProfiles"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aprofiles.reader.ReadProfiles" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for reading profile data.</p>
<dl class="simple">
<dt>Attributes:</dt><dd><p>path (str): path or URL of the file to be read.</p>
</dd>
</dl>
<dl class="py method">
<dt id="aprofiles.reader.ReadProfiles.read">
<code class="sig-name descname">read</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/aprofiles/reader.html#ReadProfiles.read"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aprofiles.reader.ReadProfiles.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Method which calls the relevant reading class based on the file name.</p>
<dl class="simple">
<dt>Returns:</dt><dd><p><code class="xref py py-class docutils literal notranslate"><span class="pre">aprofiles.Profiles</span></code>: Profiles object</p>
</dd>
</dl>
<p>Example:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1">#import library</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">aprofiles</span> <span class="k">as</span> <span class="nn">apro</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1">#Initialize reading class with file path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path</span> <span class="o">=</span> <span class="s2">&quot;examples/data/L2_0-20000-001492_A20210909.nc&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">reader</span> <span class="o">=</span> <span class="n">apro</span><span class="o">.</span><span class="n">ReadProfiles</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1">#calls the read method</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">profiles</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="data-classes">
<h2>Data Classes<a class="headerlink" href="#data-classes" title="Permalink to this headline">¶</a></h2>
<div class="section" id="module-aprofiles.profilesdata">
<span id="profilesdata"></span><h3>ProfilesData<a class="headerlink" href="#module-aprofiles.profilesdata" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt id="aprofiles.profilesdata.ProfilesData">
<em class="property">class </em><code class="sig-prename descclassname">aprofiles.profilesdata.</code><code class="sig-name descname">ProfilesData</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aprofiles/profilesdata.html#ProfilesData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aprofiles.profilesdata.ProfilesData" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class representing profiles data.</p>
<dl class="py method">
<dt id="aprofiles.profilesdata.ProfilesData.clouds">
<code class="sig-name descname">clouds</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">time_avg</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">zmin</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">thr_noise</span><span class="o">=</span><span class="default_value">5.0</span></em>, <em class="sig-param"><span class="n">thr_clouds</span><span class="o">=</span><span class="default_value">4</span></em>, <em class="sig-param"><span class="n">min_snr</span><span class="o">=</span><span class="default_value">0.0</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aprofiles/profilesdata.html#ProfilesData.clouds"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aprofiles.profilesdata.ProfilesData.clouds" title="Permalink to this definition">¶</a></dt>
<dd><p>Module for clouds detection.</p>
<dl class="simple">
<dt>Args:</dt><dd><ul class="simple">
<li><p>time_avg (int, optional): in minutes, the time during which we aggregates the profiles before detecting clouds. Defaults to <cite>1</cite>.</p></li>
<li><p>zmin (float, optional): altitude AGL, in m, above which we look for clouds. Defaults to <cite>0</cite>. We recommend using the same value as used in the extrapolation_low_layers method.</p></li>
<li><p>thr_noise (float, optional): threshold used in the test to determine if a couple (base,peak) is significant: data[peak(z)] - data[base(z)] &gt;= thr_noise * noise(z). Defaults to <cite>5</cite>.</p></li>
<li><p>thr_clouds (float, optional): threshold used to discriminate aerosol from clouds: data[peak(z)] / data[base(z)] &gt;= thr_clouds. Defaults to <cite>4</cite>.</p></li>
<li><p>min_snr (float, optional). Minimum SNR required at the clouds peak value to consider the cloud as valid. Defaults to <cite>0</cite>.</p></li>
<li><p>verbose (bool, optional): verbose mode. Defaults to <cite>False</cite>.</p></li>
</ul>
</dd>
<dt>Returns:</dt><dd><dl class="field-list simple">
<dt class="field-odd">class</dt>
<dd class="field-odd"><p><a class="reference internal" href="#module-aprofiles.profilesdata"><span class="std std-ref">ProfilesData</span></a> object with additional <code class="xref py py-class docutils literal notranslate"><span class="pre">xarray.DataArray</span></code>: ‘clouds_bases’, ‘clouds_peaks’, and ‘clouds_tops’. ‘clouds_bases’ correspond to the bases of the clouds. ‘clouds_peaks’ correspond to the maximum of backscatter signal measured in the clouds. ‘clouds_tops’ correspond to the top of the cloud if the beam crosses the cloud. If not, the top corresponds to the first value where the signal becomes lower than the one measured at the base of the cloud.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="aprofiles.profilesdata.ProfilesData.data">
<em class="property">property </em><code class="sig-name descname">data</code><a class="headerlink" href="#aprofiles.profilesdata.ProfilesData.data" title="Permalink to this definition">¶</a></dt>
<dd><p>Data attribute (instance of <code class="xref py py-class docutils literal notranslate"><span class="pre">xarray.Dataset</span></code>)</p>
</dd></dl>

<dl class="py method">
<dt id="aprofiles.profilesdata.ProfilesData.extrapolate_below">
<code class="sig-name descname">extrapolate_below</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">var</span><span class="o">=</span><span class="default_value">'attenuated_backscatter_0'</span></em>, <em class="sig-param"><span class="n">zmin</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">method</span><span class="o">=</span><span class="default_value">'cst'</span></em>, <em class="sig-param"><span class="n">inplace</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aprofiles/profilesdata.html#ProfilesData.extrapolate_below"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aprofiles.profilesdata.ProfilesData.extrapolate_below" title="Permalink to this definition">¶</a></dt>
<dd><p>Method for extrapolating lowest layers below a certain altitude. This is of particular intrest for instruments subject to After Pulse effect, with saturated signal in the lowest layers.
We recommend to use a value of zmin=150m due to random values often found below that altitude which perturbs the clouds detection.</p>
<dl class="simple">
<dt>Args:</dt><dd><ul class="simple">
<li><p>var (str, optional): variable of the Dataset to be processed. Defaults to <cite>‘attenuated_backscatter_0’</cite>.</p></li>
<li><p>zmin (float, optional): Altitude (in m, AGL) below which the signal is extrapolated. Defaults to <cite>0</cite>.</p></li>
<li><p>method ({‘cst’, ‘lin’}, optional): Method to be used for extrapolation of lowest layers. Defaults to <cite>‘cst’</cite>.</p></li>
<li><p>inplace (bool, optional): if True, replace the variable. Defaults to <cite>False</cite>.</p></li>
</ul>
</dd>
<dt>Returns:</dt><dd><dl class="field-list simple">
<dt class="field-odd">class</dt>
<dd class="field-odd"><p><a class="reference internal" href="#module-aprofiles.profilesdata"><span class="std std-ref">ProfilesData</span></a> object.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="aprofiles.profilesdata.ProfilesData.foc">
<code class="sig-name descname">foc</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">method</span><span class="o">=</span><span class="default_value">'cloud_base'</span></em>, <em class="sig-param"><span class="n">var</span><span class="o">=</span><span class="default_value">'attenuated_backscatter_0'</span></em>, <em class="sig-param"><span class="n">z_snr</span><span class="o">=</span><span class="default_value">2000.0</span></em>, <em class="sig-param"><span class="n">min_snr</span><span class="o">=</span><span class="default_value">2.0</span></em>, <em class="sig-param"><span class="n">zmin_cloud</span><span class="o">=</span><span class="default_value">200.0</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aprofiles/profilesdata.html#ProfilesData.foc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aprofiles.profilesdata.ProfilesData.foc" title="Permalink to this definition">¶</a></dt>
<dd><p>Detects fog or condensation.</p>
<dl class="simple">
<dt>Args:</dt><dd><ul class="simple">
<li><p>method ({‘cloud_base’, ‘snr’}, optional): Defaults to <cite>‘cloud_base’</cite>.</p></li>
<li><p>var (str, optional). Used for ‘snr’ method. Variable from ProfilesData to calculate SNR from. Defaults to <cite>‘attenuated_backscatter_0’</cite>.</p></li>
<li><p>z_snr (float, optional): Used for ‘snr’ method. Altitude AGL (in m) at which we calculate the SNR. Defaults to <cite>2000.</cite>.</p></li>
<li><p>min_snr (float, optional): Used for ‘snr’ method. Minimum SNR under which the profile is considered as containing fog or condensation. Defaults to <cite>2.</cite>.</p></li>
<li><p>zmin_cloud (float, optional): Used for ‘cloud_base’ method. Altitude AGL (in m) below which a cloud base height is considered a fog or condensation situation. Defaults to <cite>200.</cite>.</p></li>
</ul>
</dd>
<dt>Returns:</dt><dd><dl class="field-list simple">
<dt class="field-odd">class</dt>
<dd class="field-odd"><p><a class="reference internal" href="#module-aprofiles.profilesdata"><span class="std std-ref">ProfilesData</span></a> object with additional <code class="xref py py-class docutils literal notranslate"><span class="pre">xarray.DataArray</span></code> ‘foc’.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="aprofiles.profilesdata.ProfilesData.gaussian_filter">
<code class="sig-name descname">gaussian_filter</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sigma</span><span class="o">=</span><span class="default_value">0.25</span></em>, <em class="sig-param"><span class="n">var</span><span class="o">=</span><span class="default_value">'attenuated_backscatter_0'</span></em>, <em class="sig-param"><span class="n">inplace</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aprofiles/profilesdata.html#ProfilesData.gaussian_filter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aprofiles.profilesdata.ProfilesData.gaussian_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies a 2D gaussian filter in order to reduce high frequency noise.</p>
<dl class="simple">
<dt>Args:</dt><dd><ul class="simple">
<li><p>sigma (scalar or sequence of scalars, optional): Standard deviation for Gaussian kernel. The standard deviations of the Gaussian filter are given for each axis as a sequence, or as a single number, in which case it is equal for all axes. Defaults to <cite>0.25</cite>.</p></li>
<li><p>var (str, optional): variable name of the Dataset to be processed. Defaults to <cite>‘attenuated_backscatter_0’</cite>.</p></li>
<li><p>inplace (bool, optional): if True, replace the variable, else use a copy. Defaults to <cite>False</cite>.</p></li>
</ul>
</dd>
<dt>Returns:</dt><dd><dl class="field-list simple">
<dt class="field-odd">class</dt>
<dd class="field-odd"><p><a class="reference internal" href="#module-aprofiles.profilesdata"><span class="std std-ref">ProfilesData</span></a> object.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="aprofiles.profilesdata.ProfilesData.klett_inversion">
<code class="sig-name descname">klett_inversion</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">time_avg</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">zmin</span><span class="o">=</span><span class="default_value">4000.0</span></em>, <em class="sig-param"><span class="n">zmax</span><span class="o">=</span><span class="default_value">6000.0</span></em>, <em class="sig-param"><span class="n">under_clouds</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">method</span><span class="o">=</span><span class="default_value">'backward'</span></em>, <em class="sig-param"><span class="n">apriori</span><span class="o">=</span><span class="default_value">{'lr': 50.0}</span></em>, <em class="sig-param"><span class="n">remove_outliers</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aprofiles/profilesdata.html#ProfilesData.klett_inversion"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aprofiles.profilesdata.ProfilesData.klett_inversion" title="Permalink to this definition">¶</a></dt>
<dd><p>Klett inversion using an apriori.</p>
<dl class="simple">
<dt>Args:</dt><dd><ul class="simple">
<li><p>time_avg (int, optional): in minutes, the time during which we aggregate the profiles before detecting the PBL. Defaults to <cite>1</cite>.</p></li>
<li><p>zmin (float, optional): minimum altitude AGL, in m, for looking for the initialization altitude. Defaults to <cite>4000.</cite>.</p></li>
<li><p>zmax (float, optional): maximum altitude AGL, in m, for looking for the initialization altitude. Defaults to <cite>6000.</cite>.</p></li>
<li><p>under_clouds (bool, optional): If True, and if clouds detection have been called before, force the initialization altitude to be found below the first cloud detected in the profile. Defaults to <cite>True</cite>.</p></li>
<li><p>method ({‘backward’, ‘forward’}, optional). Defaults to <cite>‘forward’</cite>.</p></li>
<li><p>apriori (dict, optional). A Priori value to be used to constrain the inversion. Valid keys: ‘lr’ (Lidar Ratio, in sr) and ‘aod’ (unitless). Defaults to <cite>{‘lr’: 50}</cite>.</p></li>
<li><p>remove_outliers (bool, optional). Remove profiles considered as outliers based on aod calculation ([&gt;0, &lt;1]). Defaults to <cite>False</cite> (while development. to be changed afterwards).</p></li>
<li><p>verbose (bool, optional): verbose mode. Defaults to <cite>False</cite>.</p></li>
</ul>
</dd>
<dt>Returns:</dt><dd><dl class="field-list simple">
<dt class="field-odd">class</dt>
<dd class="field-odd"><p><a class="reference internal" href="#module-aprofiles.profilesdata"><span class="std std-ref">ProfilesData</span></a> object with additional <code class="xref py py-class docutils literal notranslate"><span class="pre">xarray.DataArray</span></code> <cite>ext</cite>.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="aprofiles.profilesdata.ProfilesData.pbl">
<code class="sig-name descname">pbl</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">time_avg</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">zmin</span><span class="o">=</span><span class="default_value">100.0</span></em>, <em class="sig-param"><span class="n">zmax</span><span class="o">=</span><span class="default_value">3000.0</span></em>, <em class="sig-param"><span class="n">wav_width</span><span class="o">=</span><span class="default_value">200.0</span></em>, <em class="sig-param"><span class="n">under_clouds</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">min_snr</span><span class="o">=</span><span class="default_value">2.0</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aprofiles/profilesdata.html#ProfilesData.pbl"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aprofiles.profilesdata.ProfilesData.pbl" title="Permalink to this definition">¶</a></dt>
<dd><p>Detects Planetary Boundary Layer Height between zmin and zmax using convolution with a wavelet.</p>
<dl class="simple">
<dt>Args:</dt><dd><ul class="simple">
<li><p>time_avg (int, optional): in minutes, the time during which we aggregate the profiles before detecting the PBL. Defaults to <cite>1</cite>.</p></li>
<li><p>zmin (float, optional): maximum altitude AGL, in m, for retrieving the PBL. Defaults to <cite>100</cite>.</p></li>
<li><p>zmin (float, optional): minimum altitude AGL, in m, for retrieving the PBL. Defaults to <cite>3000</cite>.</p></li>
<li><p>wav_width (float, optional): Width of the wavelet used in the convolution, in m. Defaults to <cite>200</cite>.</p></li>
<li><p>under_clouds (bool, optional): If True, and if clouds detection have been called before, force the PBL to be found below the first cloud detected in the profile. Defaults to <cite>True</cite>.</p></li>
<li><p>min_snr (float, optional). Minimum SNR at the retrieved PBL height required to return a valid value. Defaults to <cite>2.</cite>.</p></li>
<li><p>verbose (bool, optional): verbose mode. Defaults to <cite>False</cite>.</p></li>
</ul>
</dd>
<dt>Returns:</dt><dd><dl class="field-list simple">
<dt class="field-odd">class</dt>
<dd class="field-odd"><p><a class="reference internal" href="#module-aprofiles.profilesdata"><span class="std std-ref">ProfilesData</span></a> object with additional <code class="xref py py-class docutils literal notranslate"><span class="pre">xarray.DataArray</span></code> ‘pbl’.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="aprofiles.profilesdata.ProfilesData.plot">
<code class="sig-name descname">plot</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">var</span><span class="o">=</span><span class="default_value">'attenuated_backscatter_0'</span></em>, <em class="sig-param"><span class="n">datetime</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">zref</span><span class="o">=</span><span class="default_value">'agl'</span></em>, <em class="sig-param"><span class="n">zmin</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">zmax</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">vmin</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">vmax</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">log</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">show_fog</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">show_pbl</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">show_clouds</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">cmap</span><span class="o">=</span><span class="default_value">'coolwarm'</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aprofiles/profilesdata.html#ProfilesData.plot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aprofiles.profilesdata.ProfilesData.plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Plotting method. Quicklook or single profile.</p>
<dl class="simple">
<dt>Args:</dt><dd><ul class="simple">
<li><p>var (str, optional): Variable of ProfilesData.data Dataset to be plotted. Defaults to <cite>‘attenuated_backscatter_0’</cite>.</p></li>
<li><p>datetime (np.datetime64, optional): if provided, plot the profile for closest time. If not, plot an image constructed on all profiles.Defaults to <cite>None</cite>.</p></li>
<li><p>zref (str, optional): Reference altitude. Expected values: ‘agl’ (above ground level) or ‘asl’ (above ea level). Defaults to ‘agl’</p></li>
<li><p>zmin (float, optional): Minimum altitude AGL (m). Defaults to <cite>None</cite>. If <cite>None</cite>, sets to minimum available altitude.</p></li>
<li><p>zmax (float, optional): Maximum altitude AGL (m). Defaults to <cite>None</cite>. If <cite>None</cite>, sets maximum available altitude.</p></li>
<li><p>vmin (float, optional): Minimum value. Defaults to <cite>None</cite>.</p></li>
<li><p>vmax (float, optional): Maximum value. Defaults to <cite>None</cite>. If <cite>None</cite>, calculates max from data.</p></li>
<li><p>log (bool, optional), Use logarithmic scale. Defaults to <cite>False</cite>.</p></li>
<li><p>show_fog (bool, optional): Add fog detection. Defaults to <cite>False</cite>.</p></li>
<li><p>show_pbl (bool, optional): Add PBL height. Defaults to <cite>False</cite>.</p></li>
<li><p>show_clouds (bool, optional): Add clouds detection. Defaults to <cite>False</cite>.</p></li>
<li><p>cmap (str, optional): Matplotlib colormap. Defaults to <cite>‘coolwarm’</cite>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="aprofiles.profilesdata.ProfilesData.range_correction">
<code class="sig-name descname">range_correction</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">var</span><span class="o">=</span><span class="default_value">'attenuated_backscatter_0'</span></em>, <em class="sig-param"><span class="n">inplace</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aprofiles/profilesdata.html#ProfilesData.range_correction"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aprofiles.profilesdata.ProfilesData.range_correction" title="Permalink to this definition">¶</a></dt>
<dd><p>Method that corrects the solid angle effect (1/z2) which makes that the backscatter beam more unlikely to be detected with the square of the altitude.</p>
<dl class="simple">
<dt>Args:</dt><dd><ul class="simple">
<li><p>var (str, optional): variable of the Dataset to be processed. Defaults to <cite>‘attenuated_backscatter_0’</cite>.</p></li>
<li><p>inplace (bool, optional): if True, replace the variable. Defaults to <cite>False</cite>.</p></li>
</ul>
</dd>
<dt>Returns:</dt><dd><dl class="field-list simple">
<dt class="field-odd">class</dt>
<dd class="field-odd"><p><a class="reference internal" href="#module-aprofiles.profilesdata"><span class="std std-ref">ProfilesData</span></a> object.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="aprofiles.profilesdata.ProfilesData.snr">
<code class="sig-name descname">snr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">var</span><span class="o">=</span><span class="default_value">'attenuated_backscatter_0'</span></em>, <em class="sig-param"><span class="n">step</span><span class="o">=</span><span class="default_value">4</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aprofiles/profilesdata.html#ProfilesData.snr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aprofiles.profilesdata.ProfilesData.snr" title="Permalink to this definition">¶</a></dt>
<dd><p>Method that calculates the Signal to Noise Ratio.</p>
<dl class="simple">
<dt>Args:</dt><dd><ul class="simple">
<li><p>var (str, optional): Variable of the DataArray to calculate the SNR from. Defaults to ‘attenuated_backscatter_0’.</p></li>
<li><p>step (int, optional): Number of steps around we calculate the SNR for a given altitude. Defaults to 4.</p></li>
<li><p>verbose (bool, optional): Verbose mode. Defaults to <cite>False</cite>.</p></li>
</ul>
</dd>
<dt>Returns:</dt><dd><dl class="field-list simple">
<dt class="field-odd">class</dt>
<dd class="field-odd"><p><a class="reference internal" href="#module-aprofiles.profilesdata"><span class="std std-ref">ProfilesData</span></a> object with additional <code class="xref py py-class docutils literal notranslate"><span class="pre">xarray.DataArray</span></code> ‘snr’.</p>
</dd>
</dl>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This calculation is relatively heavy in terms of calculation costs.</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="aprofiles.profilesdata.ProfilesData.time_avg">
<code class="sig-name descname">time_avg</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">minutes</span></em>, <em class="sig-param"><span class="n">var</span><span class="o">=</span><span class="default_value">'attenuated_backscatter_0'</span></em>, <em class="sig-param"><span class="n">inplace</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aprofiles/profilesdata.html#ProfilesData.time_avg"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aprofiles.profilesdata.ProfilesData.time_avg" title="Permalink to this definition">¶</a></dt>
<dd><p>Rolling meadian on the time dimension.</p>
<dl class="simple">
<dt>Args:</dt><dd><ul class="simple">
<li><p>minutes (float): Number of minutes to average over.</p></li>
<li><p>var (str, optional): variable of the Dataset to be processed. Defaults to <cite>‘attenuated_backscatter_0’</cite>.</p></li>
<li><p>inplace (bool, optional): if True, replace the variable, else use a copy. Defaults to <cite>False</cite>.</p></li>
</ul>
</dd>
<dt>Returns:</dt><dd><dl class="field-list simple">
<dt class="field-odd">class</dt>
<dd class="field-odd"><p><a class="reference internal" href="#module-aprofiles.profilesdata"><span class="std std-ref">ProfilesData</span></a> object.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-aprofiles.rayleigh">
<span id="rayleigh"></span><h3>Rayleigh<a class="headerlink" href="#module-aprofiles.rayleigh" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt id="aprofiles.rayleigh.Rayleigh">
<em class="property">class </em><code class="sig-prename descclassname">aprofiles.rayleigh.</code><code class="sig-name descname">Rayleigh</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">altitude</span></em>, <em class="sig-param"><span class="n">wavelength</span></em>, <em class="sig-param"><span class="n">T0</span><span class="o">=</span><span class="default_value">298</span></em>, <em class="sig-param"><span class="n">P0</span><span class="o">=</span><span class="default_value">1013</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aprofiles/rayleigh.html#Rayleigh"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aprofiles.rayleigh.Rayleigh" title="Permalink to this definition">¶</a></dt>
<dd><p>Class for computing a standard rayleigh profile (backscatter and extinction)</p>
<dl class="simple">
<dt>Attributes:</dt><dd><p>altitude (array): array of altitude ASL to be used to compute the rayleigh profile, in m.
wavelength (float): Wavelength of the Rayleigh profile to be computed, in nm.
T0 (float): Temperature at ground level, in K.
P0 (float): Pressure at ground level, in hPa.</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="module-aprofiles.plot.image">
<span id="plotting"></span><h2>Plotting<a class="headerlink" href="#module-aprofiles.plot.image" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="aprofiles.plot.image.plot">
<code class="sig-prename descclassname">aprofiles.plot.image.</code><code class="sig-name descname">plot</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">da</span></em>, <em class="sig-param"><span class="n">var</span><span class="o">=</span><span class="default_value">'attenuated_backscatter_0'</span></em>, <em class="sig-param"><span class="n">zref</span><span class="o">=</span><span class="default_value">'agl'</span></em>, <em class="sig-param"><span class="n">zmin</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">zmax</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">vmin</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">vmax</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">log</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">show_fog</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">show_pbl</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">show_clouds</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">cmap</span><span class="o">=</span><span class="default_value">'coolwarm'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aprofiles/plot/image.html#plot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aprofiles.plot.image.plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot image of selected variable from  :class: <a class="reference internal" href="#module-aprofiles.profilesdata"><span class="std std-ref">ProfilesData</span></a> object.</p>
<dl class="simple">
<dt>Args:</dt><dd><ul class="simple">
<li><p>da (xr.DataArray): DataArray.</p></li>
<li><p>var (str, optional): Variable of the DataArray to be plotted. Defaults to ‘attenuated_backscatter_0’.</p></li>
<li><p>zref (str,optional): Base for altitude. Expected values: ‘agl’ (above ground level) or ‘asl’ (above sea level). Defaults to ‘agl’.</p></li>
<li><p>zmin (float, optional): Minimum altitude AGL (m). Defaults to minimum available altitude.</p></li>
<li><p>zmax (float, optional): Maximum altitude AGL (m). Defaults to maximum available altitude.</p></li>
<li><p>vmin (float, optional): Minimum value. Defaults to 0.</p></li>
<li><p>vmax (float, optional): Maximum value. If None, calculates max from data.</p></li>
<li><p>log (bool, optional), Use logarithmic scale. Defaults to None.</p></li>
<li><p>show_fog (bool, optional): Add fog detection. Defaults to False.</p></li>
<li><p>show_pbl (bool, optional): Add PBL height. Defaults to False.</p></li>
<li><p>show_clouds (bool, optional): Add clouds detection. Defaults to False.</p></li>
<li><p>cmap (str, optional): Matplotlib colormap. Defaults to ‘coolwarm’ cmap from seaborn.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<span class="target" id="module-aprofiles.plot.profile"></span><dl class="py function">
<dt id="aprofiles.plot.profile.plot">
<code class="sig-prename descclassname">aprofiles.plot.profile.</code><code class="sig-name descname">plot</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">da</span></em>, <em class="sig-param"><span class="n">datetime</span></em>, <em class="sig-param"><span class="n">var</span><span class="o">=</span><span class="default_value">'attenuated_backscatter_0'</span></em>, <em class="sig-param"><span class="n">zref</span><span class="o">=</span><span class="default_value">'agl'</span></em>, <em class="sig-param"><span class="n">zmin</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">zmax</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">vmin</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">vmax</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">log</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">show_fog</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">show_pbl</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">show_clouds</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aprofiles/plot/profile.html#plot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aprofiles.plot.profile.plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot single profile of selected variable from :class: <a class="reference internal" href="#module-aprofiles.profilesdata"><span class="std std-ref">ProfilesData</span></a> object.</p>
<dl class="simple">
<dt>Args:</dt><dd><ul class="simple">
<li><p>da (xr.DataArray): DataArray.</p></li>
<li><p>datetime (np.datetime64): time for which we plot the profile.</p></li>
<li><p>var (str, optional): Variable of the DataArray to be plotted. Defaults to ‘attenuated_backscatter_0’.</p></li>
<li><p>zref (str,optional): Base for altitude. Expected values: ‘agl’ (above ground level) or ‘asl’ (above sea level). Defaults to ‘agl’.</p></li>
<li><p>zmin (float, optional): Minimum altitude AGL (m). Defaults to minimum available altitude.</p></li>
<li><p>zmax (float, optional): Maximum altitude AGL (m). Defaults to maximum available altitude.</p></li>
<li><p>vmin (float, optional): Minimum value. Defaults to 0.</p></li>
<li><p>vmax (float, optional): Maximum value. If None, calculates max from data.</p></li>
<li><p>log (bool, optional), Use logarithmic scale. Defaults to None.</p></li>
<li><p>show_fog (bool, optional): Add fog detection. Defaults to False.</p></li>
<li><p>show_pbl (bool, optional): Add PBL height. Defaults to False.</p></li>
<li><p>show_clouds (bool, optional): Add clouds detection. Defaults to False.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<span class="target" id="module-aprofiles.plot.timeseries"></span><dl class="py function">
<dt id="aprofiles.plot.timeseries.plot">
<code class="sig-prename descclassname">aprofiles.plot.timeseries.</code><code class="sig-name descname">plot</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">da</span></em>, <em class="sig-param"><span class="n">var</span><span class="o">=</span><span class="default_value">'aod'</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aprofiles/plot/timeseries.html#plot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aprofiles.plot.timeseries.plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot time series of selected variable from :class: <a class="reference internal" href="#module-aprofiles.profilesdata"><span class="std std-ref">ProfilesData</span></a> object.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>da ([type]): [description]
var (str, optional): [description]. Defaults to ‘aod’.</p>
</dd>
</dl>
</dd></dl>

</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="installation.html" class="btn btn-neutral float-left" title="Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Augustin Mortier.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>