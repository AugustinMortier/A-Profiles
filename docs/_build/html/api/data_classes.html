
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Data Classes &#8212; A-Profiles  documentation</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet">
  <link href="../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="../_static/css/blank.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/js/custom.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Detection" href="detection.html" />
    <link rel="prev" title="Reader" href="reader.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    
<a class="navbar-brand" href="../index.html">
<p class="title">A-Profiles</p>
</a>

    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../installation.html">
  Installation
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../examples.html">
  Examples
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="../api.html">
  API
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../changelog.html">
  Changelog
 </a>
</li>

    
    <li class="nav-item">
        <a class="nav-link nav-external" href="https://aerocom-vprofiles.met.no">V-Profiles<i class="fas fa-external-link-alt"></i></a>
    </li>
    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/AugustinMortier/A-Profiles" rel="noopener" target="_blank" title="GitHub">
            <span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label>
          </a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="reader.html">
   Reader
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Data Classes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="detection.html">
   Detection
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="retrieval.html">
   Retrieval
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="plotting.html">
   Plotting
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="writing.html">
   Writing
  </a>
 </li>
</ul>

  </div>
</nav>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#profilesdata">
   ProfilesData
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#aeronet">
   Aeronet
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rayleigh">
   Rayleigh
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#size-distribution">
   Size Distribution
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#extinction-to-mass-coefficient">
   Extinction to Mass Coefficient
  </a>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="data-classes">
<h1>Data Classes<a class="headerlink" href="#data-classes" title="Permalink to this headline">¶</a></h1>
<div class="section" id="profilesdata">
<h2>ProfilesData<a class="headerlink" href="#profilesdata" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="#aprofiles.profiles.ProfilesData" title="aprofiles.profiles.ProfilesData"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProfilesData</span></code></a> class contains profiles data information. Most of the information can be found in the <cite>data</cite> attribute, which is a <a class="reference external" href="http://xarray.pydata.org/en/stable/generated/xarray.Dataset.html#xarray.Dataset" title="(in xarray v0.19.1.dev6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">xarray.Dataset</span></code></a>.
Detection and retrieval methods might add information as additional <a class="reference external" href="http://xarray.pydata.org/en/stable/generated/xarray.DataArray.html#xarray.DataArray" title="(in xarray v0.19.1.dev6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">xarray.DataArray</span></code></a>.</p>
<span class="target" id="module-aprofiles.profiles"></span><dl class="py class">
<dt id="aprofiles.profiles.ProfilesData">
<em class="property">class </em><code class="sig-prename descclassname">aprofiles.profiles.</code><code class="sig-name descname">ProfilesData</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aprofiles/profiles.html#ProfilesData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aprofiles.profiles.ProfilesData" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class representing profiles data returned by <a class="reference internal" href="reader.html#aprofiles.reader.ReadProfiles" title="aprofiles.reader.ReadProfiles"><code class="xref py py-class docutils literal notranslate"><span class="pre">aprofiles.reader.ReadProfiles</span></code></a>.</p>
<dl class="py method">
<dt id="aprofiles.profiles.ProfilesData.clouds">
<code class="sig-name descname">clouds</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">time_avg</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">zmin</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">thr_noise</span><span class="o">=</span><span class="default_value">5.0</span></em>, <em class="sig-param"><span class="n">thr_clouds</span><span class="o">=</span><span class="default_value">4.0</span></em>, <em class="sig-param"><span class="n">min_snr</span><span class="o">=</span><span class="default_value">0.0</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aprofiles/profiles.html#ProfilesData.clouds"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aprofiles.profiles.ProfilesData.clouds" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls <a class="reference internal" href="detection.html#aprofiles.detection.clouds.detect_clouds" title="aprofiles.detection.clouds.detect_clouds"><code class="xref py py-meth docutils literal notranslate"><span class="pre">aprofiles.detection.clouds.detect_clouds()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt id="aprofiles.profiles.ProfilesData.data">
<em class="property">property </em><code class="sig-name descname">data</code><a class="headerlink" href="#aprofiles.profiles.ProfilesData.data" title="Permalink to this definition">¶</a></dt>
<dd><p>Data attribute (instance of <a class="reference external" href="http://xarray.pydata.org/en/stable/generated/xarray.Dataset.html#xarray.Dataset" title="(in xarray v0.19.1.dev6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">xarray.Dataset</span></code></a>)</p>
</dd></dl>

<dl class="py method">
<dt id="aprofiles.profiles.ProfilesData.desaturate_below">
<code class="sig-name descname">desaturate_below</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">var</span><span class="o">=</span><span class="default_value">'attenuated_backscatter_0'</span></em>, <em class="sig-param"><span class="n">z</span><span class="o">=</span><span class="default_value">4000.0</span></em>, <em class="sig-param"><span class="n">inplace</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aprofiles/profiles.html#ProfilesData.desaturate_below"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aprofiles.profiles.ProfilesData.desaturate_below" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove saturation caused by clouds at low altitude which results in negative values above the maximum.
The absolute value of the signal is returned below the prescribed altitude.</p>
<dl class="simple">
<dt>Args:</dt><dd><ul class="simple">
<li><p>var (str, optional): variable of the <a class="reference external" href="http://xarray.pydata.org/en/stable/generated/xarray.Dataset.html#xarray.Dataset" title="(in xarray v0.19.1.dev6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">xarray.Dataset</span></code></a> to be processed. Defaults to <cite>‘attenuated_backscatter_0’</cite>.</p></li>
<li><p>z (float, optional): Altitude (in m, AGL) below which the signal is unsaturated. Defaults to <cite>4000.</cite>.</p></li>
<li><p>inplace (bool, optional): if True, replace the instance of the <a class="reference internal" href="#aprofiles.profiles.ProfilesData" title="aprofiles.profiles.ProfilesData"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProfilesData</span></code></a> class. Defaults to <cite>False</cite>.</p></li>
</ul>
</dd>
<dt>Todo:</dt><dd><p>Refine method to desaturate only saturated areas.</p>
</dd>
<dt>Returns:</dt><dd><p><a class="reference internal" href="#aprofiles.profiles.ProfilesData" title="aprofiles.profiles.ProfilesData"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProfilesData</span></code></a> object with additional attribute <cite>desaturate</cite> for the processed <a class="reference external" href="http://xarray.pydata.org/en/stable/generated/xarray.DataArray.html#xarray.DataArray" title="(in xarray v0.19.1.dev6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">xarray.DataArray</span></code></a>.</p>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>For now, absolute values are returned everywhere below the prescribed altitude.</p>
</div>
<dl>
<dt>Example:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">aprofiles</span> <span class="k">as</span> <span class="nn">apro</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># read example file</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path</span> <span class="o">=</span> <span class="s2">&quot;examples/data/E-PROFILE/L2_0-20000-001492_A20210909.nc&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">reader</span> <span class="o">=</span> <span class="n">apro</span><span class="o">.</span><span class="n">reader</span><span class="o">.</span><span class="n">ReadProfiles</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">profiles</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># desaturation below 4000m</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">profiles</span><span class="o">.</span><span class="n">desaturate_below</span><span class="p">(</span><span class="n">z</span><span class="o">=</span><span class="mf">4000.</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">profiles</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">attenuated_backscatter_0</span><span class="o">.</span><span class="n">desaturated</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="figure align-default" id="id7">
<a class="reference internal image-reference" href="../_images/saturated.png"><img alt="before desaturation" src="../_images/saturated.png" style="width: 600.0px; height: 200.0px;" /></a>
<p class="caption"><span class="caption-text">Before desaturation.</span><a class="headerlink" href="#id7" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-default" id="id8">
<a class="reference internal image-reference" href="../_images/desaturated.png"><img alt="after desaturation" src="../_images/desaturated.png" style="width: 600.0px; height: 200.0px;" /></a>
<p class="caption"><span class="caption-text">After desaturation.</span><a class="headerlink" href="#id8" title="Permalink to this image">¶</a></p>
</div>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="aprofiles.profiles.ProfilesData.extrapolate_below">
<code class="sig-name descname">extrapolate_below</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">var</span><span class="o">=</span><span class="default_value">'attenuated_backscatter_0'</span></em>, <em class="sig-param"><span class="n">z</span><span class="o">=</span><span class="default_value">150</span></em>, <em class="sig-param"><span class="n">method</span><span class="o">=</span><span class="default_value">'cst'</span></em>, <em class="sig-param"><span class="n">inplace</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aprofiles/profiles.html#ProfilesData.extrapolate_below"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aprofiles.profiles.ProfilesData.extrapolate_below" title="Permalink to this definition">¶</a></dt>
<dd><p>Method for extrapolating lowest layers below a certain altitude. This is of particular intrest for instruments subject to After Pulse effect, with saturated signal in the lowest layers.
We recommend to use a value of zmin=150m due to random values often found below that altitude which perturbs the clouds detection.</p>
<dl>
<dt>Args:</dt><dd><ul class="simple">
<li><p>var (str, optional): variable of the <a class="reference external" href="http://xarray.pydata.org/en/stable/generated/xarray.Dataset.html#xarray.Dataset" title="(in xarray v0.19.1.dev6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">xarray.Dataset</span></code></a> to be processed. Defaults to <cite>‘attenuated_backscatter_0’</cite>.</p></li>
<li><p>z (float, optional): Altitude (in m, AGL) below which the signal is extrapolated. Defaults to <cite>150</cite>.</p></li>
<li><p>method ({‘cst’, ‘lin’}, optional): Method to be used for extrapolation of lowest layers. Defaults to <cite>‘cst’</cite>.</p></li>
<li><p>inplace (bool, optional): if True, replace the instance of the <a class="reference internal" href="#aprofiles.profiles.ProfilesData" title="aprofiles.profiles.ProfilesData"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProfilesData</span></code></a> class. Defaults to <cite>False</cite>.</p></li>
</ul>
</dd>
<dt>Returns:</dt><dd><p><a class="reference internal" href="#aprofiles.profiles.ProfilesData" title="aprofiles.profiles.ProfilesData"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProfilesData</span></code></a> object with additional attributes <cite>extrapolation_low_layers_altitude_agl</cite> and <cite>extrapolation_low_layers_method</cite> for the processed <a class="reference external" href="http://xarray.pydata.org/en/stable/generated/xarray.DataArray.html#xarray.DataArray" title="(in xarray v0.19.1.dev6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">xarray.DataArray</span></code></a>.</p>
</dd>
<dt>Example:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">aprofiles</span> <span class="k">as</span> <span class="nn">apro</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># read example file</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path</span> <span class="o">=</span> <span class="s2">&quot;examples/data/E-PROFILE/L2_0-20000-001492_A20210909.nc&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">reader</span> <span class="o">=</span> <span class="n">apro</span><span class="o">.</span><span class="n">reader</span><span class="o">.</span><span class="n">ReadProfiles</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">profiles</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># desaturation below 4000m</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">profiles</span><span class="o">.</span><span class="n">extrapolate_below</span><span class="p">(</span><span class="n">z</span><span class="o">=</span><span class="mf">150.</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">profiles</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">attenuated_backscatter_0</span><span class="o">.</span><span class="n">extrapolation_low_layers_altitude_agl</span>
<span class="go">150</span>
</pre></div>
</div>
<div class="figure align-default" id="id9">
<a class="reference internal image-reference" href="../_images/lowest1.png"><img alt="before extrapolation" src="../_images/lowest1.png" style="width: 600.0px; height: 200.0px;" /></a>
<p class="caption"><span class="caption-text">Before extrapolation.</span><a class="headerlink" href="#id9" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-default" id="id10">
<a class="reference internal image-reference" href="../_images/lowest_extrap1.png"><img alt="after desaturation" src="../_images/lowest_extrap1.png" style="width: 600.0px; height: 200.0px;" /></a>
<p class="caption"><span class="caption-text">After extrapolation.</span><a class="headerlink" href="#id10" title="Permalink to this image">¶</a></p>
</div>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="aprofiles.profiles.ProfilesData.foc">
<code class="sig-name descname">foc</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">method</span><span class="o">=</span><span class="default_value">'cloud_base'</span></em>, <em class="sig-param"><span class="n">var</span><span class="o">=</span><span class="default_value">'attenuated_backscatter_0'</span></em>, <em class="sig-param"><span class="n">z_snr</span><span class="o">=</span><span class="default_value">2000.0</span></em>, <em class="sig-param"><span class="n">min_snr</span><span class="o">=</span><span class="default_value">2.0</span></em>, <em class="sig-param"><span class="n">zmin_cloud</span><span class="o">=</span><span class="default_value">200.0</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aprofiles/profiles.html#ProfilesData.foc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aprofiles.profiles.ProfilesData.foc" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls <a class="reference internal" href="detection.html#aprofiles.detection.foc.detect_foc" title="aprofiles.detection.foc.detect_foc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">aprofiles.detection.foc.detect_foc()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt id="aprofiles.profiles.ProfilesData.gaussian_filter">
<code class="sig-name descname">gaussian_filter</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sigma</span><span class="o">=</span><span class="default_value">0.25</span></em>, <em class="sig-param"><span class="n">var</span><span class="o">=</span><span class="default_value">'attenuated_backscatter_0'</span></em>, <em class="sig-param"><span class="n">inplace</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aprofiles/profiles.html#ProfilesData.gaussian_filter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aprofiles.profiles.ProfilesData.gaussian_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies a 2D gaussian filter in order to reduce high frequency noise.</p>
<dl>
<dt>Args:</dt><dd><ul class="simple">
<li><p>sigma (scalar or sequence of scalars, optional): Standard deviation for Gaussian kernel. The standard deviations of the Gaussian filter are given for each axis as a sequence, or as a single number, in which case it is equal for all axes. Defaults to <cite>0.25</cite>.</p></li>
<li><p>var (str, optional): variable name of the Dataset to be processed. Defaults to <cite>‘attenuated_backscatter_0’</cite>.</p></li>
<li><p>inplace (bool, optional): if True, replace the instance of the <a class="reference internal" href="#aprofiles.profiles.ProfilesData" title="aprofiles.profiles.ProfilesData"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProfilesData</span></code></a> class. Defaults to <cite>False</cite>.</p></li>
</ul>
</dd>
<dt>Returns:</dt><dd><p><a class="reference internal" href="#aprofiles.profiles.ProfilesData" title="aprofiles.profiles.ProfilesData"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProfilesData</span></code></a> object with additional attributes <cite>gaussian_filter</cite> for the processed <a class="reference external" href="http://xarray.pydata.org/en/stable/generated/xarray.DataArray.html#xarray.DataArray" title="(in xarray v0.19.1.dev6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">xarray.DataArray</span></code></a>.</p>
</dd>
<dt>Example:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">aprofiles</span> <span class="k">as</span> <span class="nn">apro</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># read example file</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path</span> <span class="o">=</span> <span class="s2">&quot;examples/data/E-PROFILE/L2_0-20000-001492_A20210909.nc&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">reader</span> <span class="o">=</span> <span class="n">apro</span><span class="o">.</span><span class="n">reader</span><span class="o">.</span><span class="n">ReadProfiles</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">profiles</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># apply gaussian filtering</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">profiles</span><span class="o">.</span><span class="n">gaussian_filter</span><span class="p">(</span><span class="n">sigma</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">profiles</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">attenuated_backscatter_0</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">gaussian_filter</span>
<span class="go">0.50</span>
</pre></div>
</div>
<div class="figure align-default" id="id11">
<a class="reference internal image-reference" href="../_images/attenuated_backscatter1.png"><img alt="before filtering" src="../_images/attenuated_backscatter1.png" style="width: 600.0px; height: 200.0px;" /></a>
<p class="caption"><span class="caption-text">Before gaussian filtering.</span><a class="headerlink" href="#id11" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-default" id="id12">
<a class="reference internal image-reference" href="../_images/gaussian_filter1.png"><img alt="after gaussian filtering" src="../_images/gaussian_filter1.png" style="width: 600.0px; height: 200.0px;" /></a>
<p class="caption"><span class="caption-text">After gaussian filtering (sigma=0.5).</span><a class="headerlink" href="#id12" title="Permalink to this image">¶</a></p>
</div>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="aprofiles.profiles.ProfilesData.inversion">
<code class="sig-name descname">inversion</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">time_avg</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">zmin</span><span class="o">=</span><span class="default_value">4000.0</span></em>, <em class="sig-param"><span class="n">zmax</span><span class="o">=</span><span class="default_value">6000.0</span></em>, <em class="sig-param"><span class="n">min_snr</span><span class="o">=</span><span class="default_value">0.0</span></em>, <em class="sig-param"><span class="n">under_clouds</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">method</span><span class="o">=</span><span class="default_value">'forward'</span></em>, <em class="sig-param"><span class="n">apriori</span><span class="o">=</span><span class="default_value">{'lr': 50.0}</span></em>, <em class="sig-param"><span class="n">remove_outliers</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">mass_conc</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">mass_conc_method</span><span class="o">=</span><span class="default_value">'mortier_2013'</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aprofiles/profiles.html#ProfilesData.inversion"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aprofiles.profiles.ProfilesData.inversion" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls <a class="reference internal" href="retrieval.html#aprofiles.retrieval.extinction.inversion" title="aprofiles.retrieval.extinction.inversion"><code class="xref py py-meth docutils literal notranslate"><span class="pre">aprofiles.retrieval.extinction.inversion()</span></code></a> to calculate extinction profiles.
Calls <code class="xref py py-meth docutils literal notranslate"><span class="pre">aprofiles.retrieval.mass_conc.mec()</span></code> to calculate Mass to Extinction coefficients if <cite>mass_conc</cite> is true (Default).</p>
</dd></dl>

<dl class="py method">
<dt id="aprofiles.profiles.ProfilesData.pbl">
<code class="sig-name descname">pbl</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">time_avg</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">zmin</span><span class="o">=</span><span class="default_value">100.0</span></em>, <em class="sig-param"><span class="n">zmax</span><span class="o">=</span><span class="default_value">3000.0</span></em>, <em class="sig-param"><span class="n">wav_width</span><span class="o">=</span><span class="default_value">200.0</span></em>, <em class="sig-param"><span class="n">under_clouds</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">min_snr</span><span class="o">=</span><span class="default_value">2.0</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aprofiles/profiles.html#ProfilesData.pbl"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aprofiles.profiles.ProfilesData.pbl" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls <a class="reference internal" href="detection.html#aprofiles.detection.pbl.detect_pbl" title="aprofiles.detection.pbl.detect_pbl"><code class="xref py py-meth docutils literal notranslate"><span class="pre">aprofiles.detection.pbl.detect_pbl()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt id="aprofiles.profiles.ProfilesData.plot">
<code class="sig-name descname">plot</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">var</span><span class="o">=</span><span class="default_value">'attenuated_backscatter_0'</span></em>, <em class="sig-param"><span class="n">datetime</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">zref</span><span class="o">=</span><span class="default_value">'agl'</span></em>, <em class="sig-param"><span class="n">zmin</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">zmax</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">vmin</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">vmax</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">log</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">show_foc</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">show_pbl</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">show_clouds</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">cmap</span><span class="o">=</span><span class="default_value">'coolwarm'</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aprofiles/profiles.html#ProfilesData.plot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aprofiles.profiles.ProfilesData.plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Plotting method.
Depending on the variable selected, this method will plot an image, a single profile or a time series of the requested variable.
See also <a class="reference internal" href="plotting.html#plotting"><span class="std std-ref">Plotting</span></a>.</p>
<dl class="simple">
<dt>Args:</dt><dd><ul class="simple">
<li><p>var (str, optional): Variable to be plotted. Defaults to <cite>‘attenuated_backscatter_0’</cite>.</p></li>
<li><p>datetime (<a class="reference external" href="https://numpy.org/doc/stable/reference/arrays.scalars.html#numpy.datetime64" title="(in NumPy v1.21)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.datetime64</span></code></a>, optional): if provided, plot the profile for closest time. If not, plot an image constructed on all profiles.Defaults to <cite>None</cite>.</p></li>
<li><p>zref ({‘agl’, ‘asl’}, optional): Base reference for the altitude axis.. Defaults to <cite>‘agl’</cite></p></li>
<li><p>zmin (float, optional): Minimum altitude AGL (m). Defaults to <cite>None</cite>. If <cite>None</cite>, sets to minimum available altitude.</p></li>
<li><p>zmax (float, optional): Maximum altitude AGL (m). Defaults to <cite>None</cite>. If <cite>None</cite>, sets maximum available altitude.</p></li>
<li><p>vmin (float, optional): Minimum value. Defaults to <cite>None</cite>.</p></li>
<li><p>vmax (float, optional): Maximum value. Defaults to <cite>None</cite>. If <cite>None</cite>, calculates max from data.</p></li>
<li><p>log (bool, optional), Use logarithmic scale. Defaults to <cite>False</cite>.</p></li>
<li><p>show_foc (bool, optional): Show fog or condensation retrievals. Defaults to <cite>False</cite>.</p></li>
<li><p>show_pbl (bool, optional): Show PBL height retrievals. Defaults to <cite>False</cite>.</p></li>
<li><p>show_clouds (bool, optional): Show clouds retrievals. Defaults to <cite>False</cite>.</p></li>
<li><p>cmap (str, optional): Matplotlib colormap. Defaults to <cite>‘coolwarm’</cite>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="aprofiles.profiles.ProfilesData.range_correction">
<code class="sig-name descname">range_correction</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">var</span><span class="o">=</span><span class="default_value">'attenuated_backscatter_0'</span></em>, <em class="sig-param"><span class="n">inplace</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aprofiles/profiles.html#ProfilesData.range_correction"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aprofiles.profiles.ProfilesData.range_correction" title="Permalink to this definition">¶</a></dt>
<dd><p>Method that corrects the solid angle effect (1/z2) which makes that the backscatter beam is more unlikely to be detected with the square of the altitude.</p>
<dl class="simple">
<dt>Args:</dt><dd><ul class="simple">
<li><p>var (str, optional): variable of the Dataset to be processed. Defaults to <cite>‘attenuated_backscatter_0’</cite>.</p></li>
<li><p>inplace (bool, optional): if True, replace the instance of the <a class="reference internal" href="#aprofiles.profiles.ProfilesData" title="aprofiles.profiles.ProfilesData"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProfilesData</span></code></a> class. Defaults to <cite>False</cite>.</p></li>
</ul>
</dd>
<dt>Returns:</dt><dd><dl class="field-list simple">
<dt class="field-odd">class</dt>
<dd class="field-odd"><p><a class="reference internal" href="#aprofiles.profiles.ProfilesData" title="aprofiles.profiles.ProfilesData"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProfilesData</span></code></a> object.</p>
</dd>
</dl>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Make sure that the range correction is not already applied to the selected variable.</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="aprofiles.profiles.ProfilesData.snr">
<code class="sig-name descname">snr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">var</span><span class="o">=</span><span class="default_value">'attenuated_backscatter_0'</span></em>, <em class="sig-param"><span class="n">step</span><span class="o">=</span><span class="default_value">4</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aprofiles/profiles.html#ProfilesData.snr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aprofiles.profiles.ProfilesData.snr" title="Permalink to this definition">¶</a></dt>
<dd><p>Method that calculates the Signal to Noise Ratio.</p>
<dl class="simple">
<dt>Args:</dt><dd><ul class="simple">
<li><p>var (str, optional): Variable of the DataArray to calculate the SNR from. Defaults to <cite>‘attenuated_backscatter_0’</cite>.</p></li>
<li><p>step (int, optional): Number of steps around we calculate the SNR for a given altitude. Defaults to <cite>4</cite>.</p></li>
<li><p>verbose (bool, optional): Verbose mode. Defaults to <cite>False</cite>.</p></li>
</ul>
</dd>
<dt>Returns:</dt><dd><dl class="field-list simple">
<dt class="field-odd">class</dt>
<dd class="field-odd"><p><a class="reference internal" href="#aprofiles.profiles.ProfilesData" title="aprofiles.profiles.ProfilesData"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProfilesData</span></code></a> object with additional <a class="reference external" href="http://xarray.pydata.org/en/stable/generated/xarray.DataArray.html#xarray.DataArray" title="(in xarray v0.19.1.dev6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">xarray.DataArray</span></code></a> <cite>snr</cite>.</p>
</dd>
</dl>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This calculation is relatively heavy in terms of calculation.</p>
</div>
<dl>
<dt>Example:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">aprofiles</span> <span class="k">as</span> <span class="nn">apro</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># read example file</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path</span> <span class="o">=</span> <span class="s2">&quot;examples/data/E-PROFILE/L2_0-20000-001492_A20210909.nc&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">reader</span> <span class="o">=</span> <span class="n">apro</span><span class="o">.</span><span class="n">reader</span><span class="o">.</span><span class="n">ReadProfiles</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">profiles</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># snr calculcation</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">profiles</span><span class="o">.</span><span class="n">snr</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># snr image</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">profiles</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">var</span><span class="o">=</span><span class="s1">&#39;snr&#39;</span><span class="p">,</span><span class="n">vmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;Greys_r&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="figure align-default" id="id13">
<a class="reference internal image-reference" href="../_images/snr.png"><img alt="snr" src="../_images/snr.png" style="width: 600.0px; height: 200.0px;" /></a>
<p class="caption"><span class="caption-text">Signal to Noise Ratio.</span><a class="headerlink" href="#id13" title="Permalink to this image">¶</a></p>
</div>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="aprofiles.profiles.ProfilesData.time_avg">
<code class="sig-name descname">time_avg</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">minutes</span></em>, <em class="sig-param"><span class="n">var</span><span class="o">=</span><span class="default_value">'attenuated_backscatter_0'</span></em>, <em class="sig-param"><span class="n">inplace</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aprofiles/profiles.html#ProfilesData.time_avg"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aprofiles.profiles.ProfilesData.time_avg" title="Permalink to this definition">¶</a></dt>
<dd><p>Rolling median in the time dimension.</p>
<dl class="simple">
<dt>Args:</dt><dd><ul class="simple">
<li><p>minutes (float): Number of minutes to average over.</p></li>
<li><p>var (str, optional): variable of the Dataset to be processed. Defaults to <cite>‘attenuated_backscatter_0’</cite>.</p></li>
<li><p>inplace (bool, optional): if True, replace the instance of the <a class="reference internal" href="#aprofiles.profiles.ProfilesData" title="aprofiles.profiles.ProfilesData"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProfilesData</span></code></a> class. Defaults to <cite>False</cite>.</p></li>
</ul>
</dd>
<dt>Returns:</dt><dd><dl class="field-list simple">
<dt class="field-odd">class</dt>
<dd class="field-odd"><p><a class="reference internal" href="#aprofiles.profiles.ProfilesData" title="aprofiles.profiles.ProfilesData"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProfilesData</span></code></a> object.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="aprofiles.profiles.ProfilesData.write">
<code class="sig-name descname">write</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">base_dir</span><span class="o">=</span><span class="default_value">'examples/data/V-Profiles/'</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aprofiles/profiles.html#ProfilesData.write"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aprofiles.profiles.ProfilesData.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls <a class="reference internal" href="writing.html#aprofiles.io.write_profiles.write" title="aprofiles.io.write_profiles.write"><code class="xref py py-meth docutils literal notranslate"><span class="pre">aprofiles.io.write_profiles.write()</span></code></a>.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="aeronet">
<h2>Aeronet<a class="headerlink" href="#aeronet" title="Permalink to this headline">¶</a></h2>
<p>Not implemented yet.</p>
<span class="target" id="module-aprofiles.aeronet"></span><dl class="py class">
<dt id="aprofiles.aeronet.AeronetData">
<em class="property">class </em><code class="sig-prename descclassname">aprofiles.aeronet.</code><code class="sig-name descname">AeronetData</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aprofiles/aeronet.html#AeronetData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aprofiles.aeronet.AeronetData" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class representing profiles data returned by <code class="xref py py-class docutils literal notranslate"><span class="pre">aprofiles.io.reader.ReadAeronet</span></code>.</p>
<dl class="py method">
<dt id="aprofiles.aeronet.AeronetData.data">
<em class="property">property </em><code class="sig-name descname">data</code><a class="headerlink" href="#aprofiles.aeronet.AeronetData.data" title="Permalink to this definition">¶</a></dt>
<dd><p>Data attribute (instance of <a class="reference external" href="http://xarray.pydata.org/en/stable/generated/xarray.Dataset.html#xarray.Dataset" title="(in xarray v0.19.1.dev6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">xarray.Dataset</span></code></a>)</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="rayleigh">
<h2>Rayleigh<a class="headerlink" href="#rayleigh" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="#aprofiles.rayleigh.RayleighData" title="aprofiles.rayleigh.RayleighData"><code class="xref py py-class docutils literal notranslate"><span class="pre">RayleighData</span></code></a> class is used for producing Rayleigh profiles in a standard atmosphere.</p>
<span class="target" id="module-aprofiles.rayleigh"></span><dl class="py class">
<dt id="aprofiles.rayleigh.RayleighData">
<em class="property">class </em><code class="sig-prename descclassname">aprofiles.rayleigh.</code><code class="sig-name descname">RayleighData</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">altitude</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)">list</a></span></em>, <em class="sig-param"><span class="n">wavelength</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)">float</a></span></em>, <em class="sig-param"><span class="n">T0</span><span class="o">=</span><span class="default_value">298</span></em>, <em class="sig-param"><span class="n">P0</span><span class="o">=</span><span class="default_value">1013</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aprofiles/rayleigh.html#RayleighData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aprofiles.rayleigh.RayleighData" title="Permalink to this definition">¶</a></dt>
<dd><p>Class for computing <em>rayleigh profile</em> in a standard atmosphere.
This class calls the <a class="reference internal" href="#aprofiles.rayleigh.RayleighData.get_optics_in_std_atmo" title="aprofiles.rayleigh.RayleighData.get_optics_in_std_atmo"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_optics_in_std_atmo()</span></code></a> method, which produces profiles of <cite>backscatter</cite> and <cite>extinction</cite> coefficients.</p>
<dl>
<dt>Attributes:</dt><dd><ul class="simple">
<li><p>altitude (array-like): array of altitude ASL to be used to compute the rayleigh profile, in m.</p></li>
<li><p>wavelength (float): Wavelength of the Rayleigh profile to be computed, in nm.</p></li>
<li><p>T0 (float): Temperature at ground level, in K.</p></li>
<li><p>P0 (float): Pressure at ground level, in hPa.</p></li>
</ul>
</dd>
<dt>Example:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># some imports</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">aprofiles</span> <span class="k">as</span> <span class="nn">apro</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># creates altitude array</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">altitude</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="mi">15000</span><span class="p">,</span><span class="mi">15</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wavelength</span> <span class="o">=</span> <span class="mf">1064.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># produce rayleigh profile</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rayleigh</span> <span class="o">=</span> <span class="n">apro</span><span class="o">.</span><span class="n">rayleigh</span><span class="o">.</span><span class="n">RayleighData</span><span class="p">(</span><span class="n">altitude</span><span class="p">,</span> <span class="n">wavelength</span><span class="p">,</span> <span class="n">T0</span><span class="o">=</span><span class="mi">298</span><span class="p">,</span> <span class="n">P0</span><span class="o">=</span><span class="mi">1013</span><span class="p">);</span>
<span class="go"># checkout the instance attributes</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rayleigh</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="go">dict_keys([&#39;altitude&#39;, &#39;T0&#39;, &#39;P0&#39;, &#39;wavelength&#39;, &#39;cross_section&#39;, &#39;backscatter&#39;, &#39;extinction&#39;])</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="py method">
<dt id="aprofiles.rayleigh.RayleighData.get_optics_in_std_atmo">
<code class="sig-name descname">get_optics_in_std_atmo</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aprofiles/rayleigh.html#RayleighData.get_optics_in_std_atmo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aprofiles.rayleigh.RayleighData.get_optics_in_std_atmo" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that returns <em>backscatter</em> and <em>extinction</em> profiles <a class="footnote-reference brackets" href="#id2" id="id1">1</a> for an instance of a <a class="reference internal" href="#aprofiles.rayleigh.RayleighData" title="aprofiles.rayleigh.RayleighData"><code class="xref py py-class docutils literal notranslate"><span class="pre">RayleighData</span></code></a> class.</p>
<dl class="footnote brackets">
<dt class="label" id="id2"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>Bucholtz, A. (1995). Rayleigh-scattering calculations for the terrestrial atmosphere. Applied optics, 34(15), 2765-2773.</p>
</dd>
</dl>
<dl class="simple">
<dt>Returns:</dt><dd><dl class="simple">
<dt><a class="reference internal" href="#aprofiles.rayleigh.RayleighData" title="aprofiles.rayleigh.RayleighData"><code class="xref py py-class docutils literal notranslate"><span class="pre">aprofiles.rayleigh.RayleighData</span></code></a> object with additional attributes.</dt><dd><ul class="simple">
<li><p><cite>extinction</cite> (<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.21)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a>): extinction coefficient (m-1)</p></li>
<li><p><cite>backscatter</cite> (<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.21)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a>): backscatter coefficient (m-1.sr-1)</p></li>
<li><p><cite>cross_section</cite> (<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.21)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a>): cross section (cm-2)</p></li>
</ul>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="aprofiles.rayleigh.RayleighData.plot">
<code class="sig-name descname">plot</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aprofiles/rayleigh.html#RayleighData.plot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aprofiles.rayleigh.RayleighData.plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot extinction profile of an instance of the <a class="reference internal" href="#aprofiles.rayleigh.RayleighData" title="aprofiles.rayleigh.RayleighData"><code class="xref py py-class docutils literal notranslate"><span class="pre">RayleighData</span></code></a> class.</p>
<dl>
<dt>Example:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># some imports</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">aprofiles</span> <span class="k">as</span> <span class="nn">apro</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># creates altitude array</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">altitude</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="mi">15000</span><span class="p">,</span><span class="mi">15</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wavelength</span> <span class="o">=</span> <span class="mf">1064.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># produce rayleigh profile</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rayleigh</span> <span class="o">=</span> <span class="n">apro</span><span class="o">.</span><span class="n">rayleigh</span><span class="o">.</span><span class="n">RayleighData</span><span class="p">(</span><span class="n">altitude</span><span class="p">,</span> <span class="n">wavelength</span><span class="p">,</span> <span class="n">T0</span><span class="o">=</span><span class="mi">298</span><span class="p">,</span> <span class="n">P0</span><span class="o">=</span><span class="mi">1013</span><span class="p">);</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># plot profile</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rayleigh</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
<div class="figure align-default" id="id14">
<a class="reference internal image-reference" href="../_images/rayleigh.png"><img alt="rayleigh profile" src="../_images/rayleigh.png" style="width: 480.0px; height: 480.0px;" /></a>
<p class="caption"><span class="caption-text">Rayleigh extinction profile for a standard atmosphere.</span><a class="headerlink" href="#id14" title="Permalink to this image">¶</a></p>
</div>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="size-distribution">
<h2>Size Distribution<a class="headerlink" href="#size-distribution" title="Permalink to this headline">¶</a></h2>
<p>The size distribution module is used to produce volume and number size distribution of a population of particles for a given type.
The values describing the size distribution for the different aerosol types are taken from the literature:</p>
<ul class="simple">
<li><p><cite>dust</cite>, <cite>biomass_burning</cite>, and <cite>urban</cite> aerosols <a class="footnote-reference brackets" href="#id5" id="id3">2</a></p></li>
<li><p><cite>volcanic_ash</cite> <a class="footnote-reference brackets" href="#id6" id="id4">3</a></p></li>
</ul>
<dl class="footnote brackets">
<dt class="label" id="id5"><span class="brackets"><a class="fn-backref" href="#id3">2</a></span></dt>
<dd><p>Dubovik, O., Holben, B., Eck, T. F., Smirnov, A., Kaufman, Y. J., King, M. D., … &amp; Slutsker, I. (2002). Variability of absorption and optical properties of key aerosol types observed in worldwide locations. Journal of the atmospheric sciences, 59(3), 590-608.</p>
</dd>
<dt class="label" id="id6"><span class="brackets"><a class="fn-backref" href="#id4">3</a></span></dt>
<dd><p>Mortier, A., Goloub, P., Podvin, T., Deroo, C., Chaikovsky, A., Ajtai, N., … &amp; Derimian, Y. (2013). Detection and characterization of volcanic ash plumes over Lille during the Eyjafjallajökull eruption. Atmospheric Chemistry and Physics, 13(7), 3705-3720.</p>
</dd>
</dl>
<p>Aerosol properties are defined in <a class="reference download internal" download="" href="../_downloads/308d1278cf54075a54fc8e56a1794afc/aer_properties.json"><code class="xref download docutils literal notranslate"><span class="pre">../../aprofiles/config/aer_properties.json</span></code></a></p>
<span class="target" id="module-aprofiles.size_distribution"></span><dl class="py class">
<dt id="aprofiles.size_distribution.SizeDistributionData">
<em class="property">class </em><code class="sig-prename descclassname">aprofiles.size_distribution.</code><code class="sig-name descname">SizeDistributionData</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">aer_type</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aprofiles/size_distribution.html#SizeDistributionData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aprofiles.size_distribution.SizeDistributionData" title="Permalink to this definition">¶</a></dt>
<dd><p>Class for computing <em>size distributions</em> for a given aerosol type.
This class calls the <a class="reference internal" href="#aprofiles.size_distribution.SizeDistributionData.get_sd" title="aprofiles.size_distribution.SizeDistributionData.get_sd"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_sd()</span></code></a> method, which calculates VSD and NSD (Volume and Number Size Distributions).</p>
<dl>
<dt>Attributes:</dt><dd><ul class="simple">
<li><p><cite>aer_type</cite> ({‘dust’, ‘volcanic_ash’, ‘biomass_burning’,’urban’}): aerosol type.</p></li>
<li><p><cite>aer_properties</cite> (dict): dictionnary describing the optical and microphophysical properties of the prescribed aerosol (read from <em>aer_properties.json</em>)</p></li>
</ul>
</dd>
<dt>Example:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># some imports</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">aprofiles</span> <span class="k">as</span> <span class="nn">apro</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sd</span> <span class="o">=</span> <span class="n">apro</span><span class="o">.</span><span class="n">size_distribution</span><span class="o">.</span><span class="n">SizeDistributionData</span><span class="p">(</span><span class="s1">&#39;urban&#39;</span><span class="p">)</span>
<span class="go"># checkout the instance attributes</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">apro</span><span class="o">.</span><span class="n">size_distribution</span><span class="o">.</span><span class="n">SizeDistributionData</span><span class="p">(</span><span class="s1">&#39;dust&#39;</span><span class="p">)</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="go">dict_keys([&#39;aer_type&#39;, &#39;aer_properties&#39;, &#39;radius&#39;, &#39;vsd&#39;, &#39;nsd&#39;])</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="py method">
<dt id="aprofiles.size_distribution.SizeDistributionData.get_sd">
<code class="sig-name descname">get_sd</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aprofiles/size_distribution.html#SizeDistributionData.get_sd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aprofiles.size_distribution.SizeDistributionData.get_sd" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the Volume and Number Size Distributions arrays from an instance of the <a class="reference internal" href="#aprofiles.size_distribution.SizeDistributionData" title="aprofiles.size_distribution.SizeDistributionData"><code class="xref py py-class docutils literal notranslate"><span class="pre">SizeDistributionData</span></code></a> class .</p>
<dl class="simple">
<dt>Returns:</dt><dd><dl class="simple">
<dt><code class="xref py py-class docutils literal notranslate"><span class="pre">SizeDistribData</span></code> object with additional attributes.</dt><dd><ul class="simple">
<li><p><cite>radius</cite> (<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.21)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a>): radius (µm)</p></li>
<li><p><cite>vsd</cite> (<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.21)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a>): Volume Size Distribution (µm2.µm-3)</p></li>
<li><p><cite>nsd</cite> (<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.21)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a>): Number Size Distribution (µm-3.µm-1)</p></li>
</ul>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="aprofiles.size_distribution.SizeDistributionData.plot">
<code class="sig-name descname">plot</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aprofiles/size_distribution.html#SizeDistributionData.plot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aprofiles.size_distribution.SizeDistributionData.plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot Size Distributions of an intance of the <a class="reference internal" href="#aprofiles.size_distribution.SizeDistributionData" title="aprofiles.size_distribution.SizeDistributionData"><code class="xref py py-class docutils literal notranslate"><span class="pre">SizeDistributionData</span></code></a> class.</p>
<dl>
<dt>Example:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># import aprofiles</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">aprofiles</span> <span class="k">as</span> <span class="nn">apro</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># get size distribution for urban particles</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sd</span> <span class="o">=</span> <span class="n">apro</span><span class="o">.</span><span class="n">size_distribution</span><span class="o">.</span><span class="n">SizeDistribData</span><span class="p">(</span><span class="s1">&#39;urban&#39;</span><span class="p">);</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># plot profile</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sd</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
<div class="figure align-default" id="id15">
<a class="reference internal image-reference" href="../_images/urban_sd.png"><img alt="urban size distribution" src="../_images/urban_sd.png" style="width: 480.0px; height: 480.0px;" /></a>
<p class="caption"><span class="caption-text">Size distributions for urban particles.</span><a class="headerlink" href="#id15" title="Permalink to this image">¶</a></p>
</div>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="extinction-to-mass-coefficient">
<h2>Extinction to Mass Coefficient<a class="headerlink" href="#extinction-to-mass-coefficient" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="#aprofiles.emc.EMCData" title="aprofiles.emc.EMCData"><code class="xref py py-class docutils literal notranslate"><span class="pre">EMCData</span></code></a> class is used for computing an <cite>Extinction to Mass Coefficient</cite> for a given aerosol type.</p>
<span class="target" id="module-aprofiles.emc"></span><dl class="py class">
<dt id="aprofiles.emc.EMCData">
<em class="property">class </em><code class="sig-prename descclassname">aprofiles.emc.</code><code class="sig-name descname">EMCData</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">aer_type</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a></span></em>, <em class="sig-param"><span class="n">wavelength</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)">float</a></span></em>, <em class="sig-param"><span class="n">method</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a></span> <span class="o">=</span> <span class="default_value">'mortier_2013'</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aprofiles/emc.html#EMCData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aprofiles.emc.EMCData" title="Permalink to this definition">¶</a></dt>
<dd><p>Class for computing the <em>Extinction to Mass Coefficient</em> for a given aerosol type.
This class calls the <a class="reference internal" href="#aprofiles.emc.EMCData.get_emc" title="aprofiles.emc.EMCData.get_emc"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_emc()</span></code></a> method.</p>
<dl>
<dt>Attributes:</dt><dd><ul class="simple">
<li><p><cite>aer_type</cite> ({‘dust’, ‘volcanic_ash’, ‘biomass_burning’, ‘urban’}): aerosol type.</p></li>
<li><p><cite>wavelength</cite> (int or float): wavelength, in mm.</p></li>
<li><p><cite>method</cite> ({‘mortier_2013’, ‘literature’}): method to retrieve or compute <cite>EMC</cite>.</p></li>
<li><p><cite>aer_properties</cite> (dict): dictionnary describing the optical and microphophysical properties of the prescribed aerosol (read from <em>aer_properties.json</em>)</p></li>
</ul>
</dd>
<dt>Example:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1">#some imports</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">aprofiles</span> <span class="k">as</span> <span class="nn">apro</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">emc_data</span> <span class="o">=</span> <span class="n">EMCData</span><span class="p">(</span><span class="s1">&#39;volcanic_ash&#39;</span><span class="p">,</span> <span class="mf">532.</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">emc_data</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="go">dict_keys([&#39;aer_type&#39;, &#39;wavelength&#39;, &#39;aer_properties&#39;, &#39;nsd&#39;, &#39;vsd&#39;, &#39;radius&#39;, &#39;qext&#39;, &#39;conv_factor&#39;, &#39;emc&#39;])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:.2e}</span><span class="s1"> m </span><span class="si">{:.2e}</span><span class="s1"> m2.g-1&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">emc_data</span><span class="o">.</span><span class="n">conv_factor</span><span class="p">,</span> <span class="n">emc_data</span><span class="o">.</span><span class="n">emc</span><span class="p">))</span>
<span class="go">6.21e-07 m 0.62 m2.g-1</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="py method">
<dt id="aprofiles.emc.EMCData.get_emc">
<code class="sig-name descname">get_emc</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aprofiles/emc.html#EMCData.get_emc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aprofiles.emc.EMCData.get_emc" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the Extinction to Mass Coefficient for a given type of particles assuming with prescribed size distribution shape (the amplitude is unknown), density, and using the <a class="reference external" href="https://miepython.readthedocs.io">Mie theory</a> to calculate the extinction efficiency.</p>
<dl class="simple">
<dt>Returns:</dt><dd><dl class="simple">
<dt><a class="reference internal" href="#aprofiles.emc.EMCData" title="aprofiles.emc.EMCData"><code class="xref py py-class docutils literal notranslate"><span class="pre">EMCData</span></code></a> with additional attributes:</dt><dd><ul class="simple">
<li><p><cite>nsd</cite> (1D Array): Number Size Distribution</p></li>
<li><p><cite>vsd</cite> (1D Array): Volume Size Distribution</p></li>
<li><p><cite>radius</cite> (1D Array): Radius, in µm</p></li>
<li><p><cite>x</cite> (1D Array): Size parameter (unitless)</p></li>
<li><p><cite>conv_factor</cite> (float): Conversion factor, in m</p></li>
<li><p><cite>emc</cite> (float): Extinction to Mass Coefficient, in m2.g-1</p></li>
</ul>
</dd>
</dl>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For a population of particles, the extinction coefficient <span class="math notranslate nohighlight">\(\sigma_{ext}\)</span> (m-1) can be written as follwowing:</p>
<p><span class="math notranslate nohighlight">\(\sigma_{ext} = \int_{r_{min}}^{r_{max}}N(r)Q_{ext}(m,r,\lambda) \pi r^2 dr\)</span></p>
<p>with <span class="math notranslate nohighlight">\(Q_{ext}\)</span>, the <cite>extinction efficiency</cite> and <span class="math notranslate nohighlight">\(N(r)\)</span> the <cite>Number Size Distribution</cite> (NSD).</p>
<p><span class="math notranslate nohighlight">\(Q_{ext}\)</span> varies with the refractive index, <span class="math notranslate nohighlight">\(m\)</span>, the wavelength, <span class="math notranslate nohighlight">\(\lambda\)</span> and can be calculated for spherical particles with the Mie therory.</p>
<p>Total aerosol mass concentration <span class="math notranslate nohighlight">\(M_0\)</span> (µg.m-3) can be written as:</p>
<p><span class="math notranslate nohighlight">\(M_0 = \int_{r_{min}}^{r_{max}}{M(r)dr}\)</span> where <span class="math notranslate nohighlight">\(M(r)\)</span> is the mass size distribution (MSD).</p>
<p>This equation can be written, using the relation between NSD and MSD, as:</p>
<p><span class="math notranslate nohighlight">\(M_0 = \int_{r_{min}}^{r_{max}}{\frac{4\pi r^3}{3} \rho N(r) dr}\)</span></p>
<p>where <span class="math notranslate nohighlight">\(\rho\)</span> is the particles <cite>density</cite> (kg.m-3).</p>
<p>By normalizing the NSD with respect to the fine mode (<span class="math notranslate nohighlight">\(N(r) = N_0 N_1(r)\)</span>), the combination of the previous equations leads to:</p>
<p><span class="math notranslate nohighlight">\(M_0 = \sigma_{ext} \rho \frac{4}{3} \frac{\int_{r_{min}}^{r_{max}} N_1(r) r^3 dr}{\int_{r_{min}}^{r_{max}} N_1(r) Q_{ext}(m,r,\lambda) r^2 dr}\)</span></p>
<p>By commodity, we define the <cite>conversion factor</cite> (in m) as <span class="math notranslate nohighlight">\(c_v = \frac{4}{3} \frac{\int_{r_{min}}^{r_{max}} N_1(r) r^3 dr}{\int_{r_{min}}^{r_{max}} N_1(r) Q_{ext}(m,r,\lambda) r^2 dr}\)</span></p>
<p>so the previous equation can be simplified: <span class="math notranslate nohighlight">\(M_0 = \sigma_{ext} \rho c_v\)</span></p>
<p>Finally, the <cite>Extinction to Mass Coefficient</cite> (EMC, also called <cite>mass extinction cross section</cite>, usually provided in m2.g-1) is defined as the ratio between <span class="math notranslate nohighlight">\(\sigma_{ext}\)</span> and <span class="math notranslate nohighlight">\(M_0\)</span>:</p>
<p><span class="math notranslate nohighlight">\(EMC = \frac{\sigma_{ext}}{M_0} = \frac{1}{\rho c_v}\)</span></p>
<p>with <span class="math notranslate nohighlight">\(\rho\)</span> being expressed in (g.m-3).</p>
<table class="colwidths-auto table" id="id16">
<caption><span class="caption-text">Conversion Factors and EMC calculated for the main aerosol types</span><a class="headerlink" href="#id16" title="Permalink to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head" rowspan="2"><p>Aerosol Type</p></th>
<th class="head" colspan="2"><p>Conversion Factor (µm)</p></th>
<th class="head" colspan="2"><p>EMC (m2.g-1)</p></th>
</tr>
<tr class="row-even"><th class="head"><p>532 nm</p></th>
<th class="head"><p>1064 nm</p></th>
<th class="head"><p>532 nm</p></th>
<th class="head"><p>1064 nm</p></th>
</tr>
</thead>
<tbody>
<tr class="row-odd"><td><p>Urban</p></td>
<td><p>0.31</p></td>
<td><p>1.92</p></td>
<td><p>1.86</p></td>
<td><p>0.31</p></td>
</tr>
<tr class="row-even"><td><p>Desert dust</p></td>
<td><p>0.68</p></td>
<td><p>1.04</p></td>
<td><p>0.58</p></td>
<td><p>0.38</p></td>
</tr>
<tr class="row-odd"><td><p>Biomass burning</p></td>
<td><p>0.26</p></td>
<td><p>1.28</p></td>
<td><p>3.30</p></td>
<td><p>0.68</p></td>
</tr>
<tr class="row-even"><td><p>Volcanic ash</p></td>
<td><p>0.62</p></td>
<td><p>0.56</p></td>
<td><p>0.62</p></td>
<td><p>0.68</p></td>
</tr>
</tbody>
</table>
</div>
</dd></dl>

<dl class="py method">
<dt id="aprofiles.emc.EMCData.plot">
<code class="sig-name descname">plot</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aprofiles/emc.html#EMCData.plot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aprofiles.emc.EMCData.plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot main information of an instance of the <a class="reference internal" href="#aprofiles.emc.EMCData" title="aprofiles.emc.EMCData"><code class="xref py py-class docutils literal notranslate"><span class="pre">EMCData</span></code></a> class.</p>
<dl>
<dt>Example:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1">#import aprofiles</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">aprofiles</span> <span class="k">as</span> <span class="nn">apro</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#compute emc for biomas burning particles at 532 nm</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">emc</span> <span class="o">=</span> <span class="n">apro</span><span class="o">.</span><span class="n">emc</span><span class="o">.</span><span class="n">EMCData</span><span class="p">(</span><span class="s1">&#39;volcanic_ash&#39;</span><span class="p">,</span> <span class="mf">532.</span><span class="p">);</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#plot information</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">emc</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
<div class="figure align-default" id="id17">
<a class="reference internal image-reference" href="../_images/volcanic_ash-emc.png"><img alt="volcanic ash properties" src="../_images/volcanic_ash-emc.png" style="width: 480.0px; height: 480.0px;" /></a>
<p class="caption"><span class="caption-text">Volcanic Ash particles properties used for EMC calculation.</span><a class="headerlink" href="#id17" title="Permalink to this image">¶</a></p>
</div>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
</div>


              </div>
              
              
              <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="reader.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Reader</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="detection.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Detection</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
              
          </main>
          

      </div>
    </div>
  
  <script src="../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>
<footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2021, Augustin Mortier.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.2.1.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>